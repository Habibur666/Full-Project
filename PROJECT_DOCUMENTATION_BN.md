# Wanderlust - Airbnb Clone ржкрзНрж░ржЬрзЗржХрзНржЯ ржбржХрзБржорзЗржирзНржЯрзЗрж╢ржи

## ЁЯУМ ржкрзНрж░ржЬрзЗржХрзНржЯ ржХрж┐ ржПржмржВ ржХрзЗржи ржмрж╛ржирж╛ржирзЛ рж╣ржпрж╝рзЗржЫрзЗ?

ржПржЯрж┐ ржПржХржЯрж┐ **Airbnb ржПрж░ ржорждрзЛ ржЫрзЛржЯ ржкрзНрж░ржЬрзЗржХрзНржЯ** ржпрзЗржЦрж╛ржирзЗ:
- тЬЕ ржорж╛ржирзБрж╖ ржирж┐ржЬрзЗрж░ ржмрж╛рж╕рж╛/рж░рзБржо ржнрж╛ржбрж╝рж╛ ржжрж┐рждрзЗ ржкрж╛рж░рзЗ (рж▓рж┐рж╕рзНржЯрж┐ржВ рждрзИрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░рзЗ)
- тЬЕ ржЕржирзНржпрж░рж╛ рж╕рзЗржЗ рж▓рж┐рж╕рзНржЯрж┐ржВржЧрзБрж▓рж┐ ржжрзЗржЦрждрзЗ ржкрж╛рж░рзЗ ржПржмржВ рж░рж┐ржнрж┐ржЙ ржжрж┐рждрзЗ ржкрж╛рж░рзЗ
- тЬЕ ржорж╛рж▓рж┐ржХ рж╢рзБржзрзБ ржирж┐ржЬрзЗрж░ рж▓рж┐рж╕рзНржЯрж┐ржВ ржПржбрж┐ржЯ/ржбрж┐рж▓рж┐ржЯ ржХрж░рждрзЗ ржкрж╛рж░рзЗ
- тЬЕ рж░рж┐ржнрж┐ржЙ ржжрзЗржУржпрж╝рж╛рж░ рж▓рзЛржХ рж╢рзБржзрзБ ржирж┐ржЬрзЗрж░ рж░рж┐ржнрж┐ржЙ ржбрж┐рж▓рж┐ржЯ ржХрж░рждрзЗ ржкрж╛рж░рзЗ

**ржХрзЗржи ржмрж╛ржирж╛ржирзЛ рж╣ржпрж╝рзЗржЫрзЗ?** тЖТ Web Development рж╢рж┐ржЦрж╛рж░ ржЬржирзНржп, рж╕ржм ржХрж┐ржЫрзБ ржПржХрж╕рж╛ржерзЗ ржХрж╛ржЬ ржХрж░ржЫрзЗ ржХрж┐ ржирж╛ рждрж╛ ржжрзЗржЦрж╛рж░ ржЬржирзНржпред

---

## ЁЯПЧя╕П ржкрзНрж░ржЬрзЗржХрзНржЯрзЗрж░ Structure (ржХрзЛржерж╛ржпрж╝ ржХрж┐ ржЖржЫрзЗ)

```
c:\airbnb\
тФЬтФАтФА app.js                          тЖР ржорзЗржЗржи рж╕рж╛рж░рзНржнрж╛рж░ ржлрж╛ржЗрж▓ (рж╕ржмржХрж┐ржЫрзБ ржПржЦрж╛ржирзЗ рж╢рзБрж░рзБ рж╣ржпрж╝)
тФЬтФАтФА package.json                    тЖР ржХрзЛржи packages рж▓рж╛ржЧржмрзЗ рждрж╛ рж▓рзЗржЦрж╛ ржЖржЫрзЗ
тФЬтФАтФА .env                            тЖР рж╕ржВржмрзЗржжржирж╢рзАрж▓ рждржерзНржп (password, API keys)
тФЬтФАтФА .gitignore                      тЖР Git ржХрзЗ ржмрж▓рж╛ "ржПржЗ ржлрж╛ржЗрж▓ржЧрзБрж▓рж┐ push ржХрж░ржмрзЗржи ржирж╛"
тФВ
тФЬтФАтФА models/                         тЖР ржбрж╛ржЯрж╛ржмрзЗрж╕ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░ (ржХрзЛржи ржбрж╛ржЯрж╛ ржХрж┐ржнрж╛ржмрзЗ рж╕ржВрж░ржХрзНрж╖ржг рж╣ржмрзЗ)
тФВ   тФЬтФАтФА listing.js                  тЖР рж▓рж┐рж╕рзНржЯрж┐ржВ рж╕рзНржХрж┐ржорж╛ (ржЯрж╛ржЗржЯрзЗрж▓, ржкрзНрж░рж╛ржЗрж╕, ржУржирж╛рж░ ржЗрждрзНржпрж╛ржжрж┐)
тФВ   тФЬтФАтФА user.js                     тЖР ржЗржЙржЬрж╛рж░ рж╕рзНржХрж┐ржорж╛ (ржЗржЙржЬрж╛рж░ржирзЗржо, ржЗржорзЗржЗрж▓, ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб)
тФВ   тФФтФАтФА review.js                   тЖР рж░рж┐ржнрж┐ржЙ рж╕рзНржХрж┐ржорж╛ (ржХржорзЗржирзНржЯ, рж░рзЗржЯрж┐ржВ, рж▓рзЗржЦржХ)
тФВ
тФЬтФАтФА route/                          тЖР ржпрзЗ ржкржерзЗ ржХрж┐ ржХрж░ржмрзЗржи рждрж╛ ржмрж▓рж╛ (URLs)
тФВ   тФЬтФАтФА listing.js                  тЖР /listings рж╕ржорзНржкрж░рзНржХрж┐ржд рж╕ржм ржХрж╛ржЬ
тФВ   тФЬтФАтФА review.js                   тЖР /reviews рж╕ржорзНржкрж░рзНржХрж┐ржд рж╕ржм ржХрж╛ржЬ
тФВ   тФФтФАтФА user.js                     тЖР /signup, /login рж╕ржорзНржкрж░рзНржХрж┐ржд ржХрж╛ржЬ
тФВ
тФЬтФАтФА controllers/                    тЖР ржЖрж╕рж▓ рж▓ржЬрж┐ржХ (ржХрж┐ ржХрж░рждрзЗ рж╣ржмрзЗ)
тФВ   тФЬтФАтФА listings.js                 тЖР рж▓рж┐рж╕рзНржЯрж┐ржВ ржпрзБржХрзНржд/рж╕ржорзНржкрж╛ржжржирж╛/ржбрж┐рж▓рж┐ржЯ рж▓ржЬрж┐ржХ
тФВ   тФЬтФАтФА reviews.js                  тЖР рж░рж┐ржнрж┐ржЙ ржпрзБржХрзНржд/ржбрж┐рж▓рж┐ржЯ рж▓ржЬрж┐ржХ
тФВ   тФФтФАтФА users.js                    тЖР рж╕рж╛ржЗржиржЖржк/рж▓ржЧржЗржи рж▓ржЬрж┐ржХ
тФВ
тФЬтФАтФА middleware.js                   тЖР ржХржирзНржЯрзНрж░рзЛрж▓рж╛рж░ ржЪрж╛рж▓рж╛ржирзЛрж░ ржЖржЧрзЗ ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рж╛
тФВ                                   тЖР (рж▓ржЧржЗржи ржЖржЫрзЗ? ржУржирж╛рж░? ржЗрждрзНржпрж╛ржжрж┐)
тФВ
тФЬтФАтФА schema.js                       тЖР ржбрж╛ржЯрж╛ ржнрзНржпрж╛рж▓рж┐ржбрзЗрж╢ржи (ржлрж░рзНржо ржерзЗржХрзЗ ржЖрж╕рж╛ ржбрж╛ржЯрж╛ ржарж┐ржХ?)
тФВ
тФЬтФАтФА util/                           тЖР ржЫрзЛржЯ рж╣рзЗрж▓рзНржкрж╛рж░ ржлрж╛ржВрж╢ржи
тФВ   тФЬтФАтФА wrapAsync.js                тЖР Async error handling
тФВ   тФФтФАтФА ExpressError.js             тЖР ржХрж╛рж╕рзНржЯржо Error class
тФВ
тФЬтФАтФА views/                          тЖР ржУржпрж╝рзЗржмрж╕рж╛ржЗржЯ ржжрзЗржЦрждрзЗ ржХрзЗржоржи рж╣ржмрзЗ (HTML + EJS)
тФВ   тФЬтФАтФА layout/
тФВ   тФВ   тФФтФАтФА boilerplate.ejs         тЖР рж╕ржм ржкрзЗржЬрзЗрж░ ржорзВрж▓ рж▓рзЗржЖржЙржЯ
тФВ   тФЬтФАтФА listings/
тФВ   тФВ   тФЬтФАтФА index.ejs               тЖР рж╕ржм рж▓рж┐рж╕рзНржЯрж┐ржВ ржПрж░ рждрж╛рж▓рж┐ржХрж╛
тФВ   тФВ   тФЬтФАтФА show.ejs                тЖР ржПржХржЯрж┐ рж▓рж┐рж╕рзНржЯрж┐ржВ ржПрж░ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд + рж░рж┐ржнрж┐ржЙ
тФВ   тФВ   тФЬтФАтФА new.ejs                 тЖР ржирждрзБржи рж▓рж┐рж╕рзНржЯрж┐ржВ ржпрзБржХрзНржд ржХрж░рж╛рж░ ржлрж░рзНржо
тФВ   тФВ   тФФтФАтФА edit.ejs                тЖР рж▓рж┐рж╕рзНржЯрж┐ржВ ржПржбрж┐ржЯ ржХрж░рж╛рж░ ржлрж░рзНржо
тФВ   тФЬтФАтФА users/
тФВ   тФВ   тФЬтФАтФА signup.ejs              тЖР рж╕рж╛ржЗржиржЖржк ржкрзЗржЬ
тФВ   тФВ   тФФтФАтФА login.ejs               тЖР рж▓ржЧржЗржи ржкрзЗржЬ
тФВ   тФФтФАтФА includes/
тФВ       тФЬтФАтФА nav.ejs                 тЖР ржЯржк ржирзЗржнрж┐ржЧрзЗрж╢ржи ржмрж╛рж░
тФВ       тФЬтФАтФА flash.ejs               тЖР рж╕рж╛ржХрж╕рзЗрж╕/ржПрж░рж░ ржорзЗрж╕рзЗржЬ
тФВ       тФФтФАтФА footer.ejs              тЖР ржирж┐ржЪрзЗрж░ ржлрзБржЯрж╛рж░
тФВ
тФЬтФАтФА public/                         тЖР ржЫржмрж┐, CSS, client-side JS
тФВ
тФЬтФАтФА init/                           тЖР ржбрж╛ржЯрж╛ржмрзЗрж╕ рж╢рзБрж░рзБ ржХрж░рж╛рж░ рж╕ржоржпрж╝ sample data ржнрж░рж╛
тФВ   тФЬтФАтФА index.js                    тЖР ржпржЦржи `node init/index.js` ржЪрж╛рж▓рж╛ржмрзЗржи
тФВ   тФФтФАтФА data.js                     тЖР 30+ sample listings
тФВ
тФФтФАтФА node_modules/                   тЖР рж╕ржм packages ржПржЦрж╛ржирзЗ ржбрж╛ржЙржирж▓рзЛржб рж╣ржпрж╝ (git ржП ржпрж╛ржпрж╝ ржирж╛)
```

---

## ЁЯФз ржХрзЛржи Packages (ржЯрзБрж▓рж╕) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржЫрж┐ ржПржмржВ ржХрзЗржи?

### Backend Framework
| Package | ржХрж╛ржЬ | ржХржЦржи ржмрзНржпржмрж╣рж╛рж░ |
|---------|------|-----------|
| **express** | ржУржпрж╝рзЗржм рж╕рж╛рж░рзНржнрж╛рж░ | ржкрзНрж░рждрж┐ржЯрж┐ request рж╣рзНржпрж╛ржирзНржбрзЗрж▓ ржХрж░рждрзЗ |
| **mongoose** | MongoDB ржП ржбрж╛ржЯрж╛ рж░рзЗржЦрзЗ ржмрзЗрж░ ржХрж░рждрзЗ | ржбрж╛ржЯрж╛ржмрзЗрж╕ ржЕржкрж╛рж░рзЗрж╢ржи |
| **ejs** | HTML рж▓рзЗржЦрж╛ рж╕рж╣ржЬ (ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓ ржмрж╕рж╛ржирзЛ ржпрж╛ржпрж╝) | ржУржпрж╝рзЗржмрж╕рж╛ржЗржЯ ржжрзЗржЦрж╛рждрзЗ |
| **ejs-mate** | EJS ржПрж░ рж▓рзЗржЖржЙржЯ ржлрж┐ржЪрж╛рж░ | рж╕ржм ржкрзЗржЬрзЗ same header/footer рж░рж╛ржЦрждрзЗ |

### Authentication (рж▓ржЧржЗржи рж╕рж┐рж╕рзНржЯрзЗржо)
| Package | ржХрж╛ржЬ |
|---------|------|
| **passport** | рж▓ржЧржЗржи/рж▓ржЬржЖржЙржЯ рж╕рж┐рж╕рзНржЯрзЗржо |
| **passport-local** | ржЗржЙржЬрж╛рж░ржирзЗржо + ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржжрж┐ржпрж╝рзЗ рж▓ржЧржЗржи |
| **passport-local-mongoose** | ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб рж╣рзНржпрж╛рж╢рж┐ржВ (encrypt ржХрж░рж╛) |
| **express-session** | рж▓ржЧржЗржи ржерж╛ржХрж╛ ржЕржмрж╕рзНржерж╛ ржоржирзЗ рж░рж╛ржЦрж╛ |
| **connect-mongo** | рж╕рзЗрж╢ржи ржбрж╛ржЯрж╛ MongoDB рждрзЗ рж╕ржВрж░ржХрзНрж╖ржг |

### ржнрзНржпрж╛рж▓рж┐ржбрзЗрж╢ржи ржПржмржВ ржирж┐рж░рж╛ржкрждрзНрждрж╛
| Package | ржХрж╛ржЬ |
|---------|------|
| **joi** | ржлрж░рзНржо ржерзЗржХрзЗ ржЖрж╕рж╛ ржбрж╛ржЯрж╛ рж╕ржарж┐ржХ ржХрж┐ ржирж╛ ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рж╛ |
| **connect-flash** | рж╕рж╛ржлрж▓рзНржп/ржПрж░рж░ ржорзЗрж╕рзЗржЬ ржжрзЗржЦрж╛ржирзЛ |
| **method-override** | HTML ржлрж░рзНржо ржерзЗржХрзЗ PUT/DELETE ржХрж░рждрзЗ (HTML ржП ржирзЗржЗ) |

### Image Upload (ржЫржмрж┐ ржЖржкрж▓рзЛржб)
| Package | ржХрж╛ржЬ |
|---------|------|
| **multer** | ржЫржмрж┐ ржЖржкрж▓рзЛржб ржХрж░рж╛ рж╕рж╣ржЬ ржХрж░рзЗ |
| **multer-storage-cloudinary** | ржЫржмрж┐ Cloudinary рждрзЗ рж░рж╛ржЦрж╛ (free cloud storage) |
| **cloudinary** | ржЫржмрж┐ рж░рж╛ржЦрж╛рж░ ржХрзНрж▓рж╛ржЙржб рж╕рж╛рж░рзНржнрж┐рж╕ |

### ржЕржирзНржпрж╛ржирзНржп
| Package | ржХрж╛ржЬ |
|---------|------|
| **dotenv** | `.env` ржлрж╛ржЗрж▓ ржерзЗржХрзЗ ржкрж░рж┐ржмрзЗрж╢ ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓ ржкржбрж╝рж╛ |

---

## ЁЯТ╛ ржбрж╛ржЯрж╛ржмрзЗрж╕ - Local ржмржирж╛ржо Cloud

### Local MongoDB (Development ржП ржмрзНржпржмрж╣рж╛рж░)
```
Server: 127.0.0.1:27017 (ржЖржкржирж╛рж░ ржХржорзНржкрж┐ржЙржЯрж╛рж░ ржП)
ржбрж╛ржЯрж╛ржмрзЗрж╕ ржирж╛ржо: wanderlust
```
- тЬЕ ржжрзНрж░рзБржд (ржЖржкржирж╛рж░ ржХржорзНржкрж┐ржЙржЯрж╛рж░ ржП ржЖржЫрзЗ)
- тЬЕ ржлрзНрж░рж┐
- тЭМ рж╢рзБржзрзБ ржЖржкржирж╛рж░ ржХржорзНржкрж┐ржЙржЯрж╛рж░ ржП ржХрж╛ржЬ ржХрж░рзЗ, ржЕржирзНржпрж░рж╛ ржжрзЗржЦрждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛

### MongoDB Atlas (Cloud - Production ржП ржмрзНржпржмрж╣рж╛рж░)
```
Server: mongodb+srv://username:password@cluster0.xxxxx.mongodb.net/wanderlust
```
- тЬЕ ржмрж┐рж╢рзНржмрзЗрж░ ржпрзЗржХрзЛржирзЛ ржЬрж╛ржпрж╝ржЧрж╛ ржерзЗржХрзЗ access ржХрж░рж╛ ржпрж╛ржпрж╝
- тЬЕ Render рждрзЗ deploy ржХрж░рж▓рзЗ ржПржЯрж╛ржЗ ржжрж░ржХрж╛рж░
- тЬЕ ржлрзНрж░рж┐ (500MB ржкрж░рзНржпржирзНржд)
- тД╣я╕П рж╕рзНрж▓рзЛ (ржЗржирзНржЯрж╛рж░ржирзЗржЯ ржП ржирж┐рж░рзНржнрж░ ржХрж░рзЗ)

---

## ЁЯФР рж▓ржЬрж┐ржи рж╕рж┐рж╕рзНржЯрзЗржо ржХрж┐ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ?

### Step 1: Signup (ржирж┐ржмржирзНржзржи)
```
User Form тЖТ /signup POST тЖТ 
  тФФтФА ржЗржЙржЬрж╛рж░ржирзЗржо/ржЗржорзЗржЗрж▓/ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб check ржХрж░рж╛ тЖТ
  тФФтФА ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб рж╣рзНржпрж╛рж╢ ржХрж░рж╛ (encrypt) тЖТ
  тФФтФА MongoDB ржП рж╕ржВрж░ржХрзНрж╖ржг тЖТ
  тФФтФА Redirect /listings
```

### Step 2: Login (ржкрзНрж░ржмрзЗрж╢)
```
User Form тЖТ /login POST тЖТ
  тФФтФА Passport verify ржХрж░рзЗ (ржЗржЙржЬрж╛рж░ржирзЗржо+ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб check) тЖТ
  тФФтФА рж╕рзЗрж╢ржи рждрзИрж░рж┐ ржХрж░рж╛ (MongoDB рждрзЗ) тЖТ
  тФФтФА Browser ржХрзЗ cookie ржжрзЗржУржпрж╝рж╛ (ржкрж░рж┐ржЪржпрж╝ржкрждрзНрж░) тЖТ
  тФФтФА Redirect /listings
```

### Step 3: Protected Routes (рж╕рзБрж░ржХрзНрж╖рж┐ржд ржкрзЗржЬ)
```
User ржпржЦржи /listings/new ржП ржпрж╛ржпрж╝ тЖТ
  тФФтФА Middleware check ржХрж░рзЗ: "рж▓ржЧржЗржи ржЖржЫрзЗ?" тЖТ
  тФФтФА ржирж╛ ржерж╛ржХрж▓рзЗ: /login ржП ржкрж╛ржарж╛ржпрж╝ тЖТ
  тФФтФА ржерж╛ржХрж▓рзЗ: ржкрзЗржЬ ржжрзЗржЦрж╛ржпрж╝
```

---

## ЁЯУЛ ржкрзНрж░ржзрж╛ржи Logic ржПржмржВ Flows

### 1я╕ПтГг Listing рждрзИрж░рж┐ (Create)
```
User /listings/new ржП ржлрж░рзНржо ржнрж░рзЗ Submit тЖТ
route/listing.js (POST /) тЖТ
controllers/listings.js (createListing) тЖТ
  тФЬтФА ржбрж╛ржЯрж╛ Validate ржХрж░рж╛ (schema.js)
  тФЬтФА Listing ржЕржмржЬрзЗржХрзНржЯ рждрзИрж░рж┐ ржХрж░рж╛
  тФЬтФА Owner = current logged-in user
  тФЬтФА MongoDB ржП save ржХрж░рж╛
  тФФтФА Success message ржжрзЗржЦрж┐ржпрж╝рзЗ /listings ржП redirect

Code рж▓рж╛ржЗржи: app.js тЖТ route/listing.js тЖТ controllers/listings.js line 32
```

### 2я╕ПтГг Listing ржжрзЗржЦрж╛ (Read)
```
User /listings ржП ржпрж╛ржпрж╝ тЖТ
route/listing.js (GET /) тЖТ
controllers/listings.js (indexListing) тЖТ
  тФЬтФА MongoDB ржерзЗржХрзЗ рж╕ржм Listing fetch ржХрж░рж╛
  тФЬтФА ржкрзНрж░рждрж┐ржЯрж┐ Listing ржПрж░ Owner name populate ржХрж░рж╛
  тФФтФА views/listings/index.ejs ржжрж┐ржпрж╝рзЗ HTML рждрзИрж░рж┐ ржХрж░рзЗ ржжрзЗржЦрж╛ржпрж╝

Code рж▓рж╛ржЗржи: app.js тЖТ route/listing.js тЖТ controllers/listings.js line 55
```

### 3я╕ПтГг Listing ржПржбрж┐ржЯ (Update)
```
Listing owner /listings/:id/edit ржП ржлрж░рзНржо ржнрж░рзЗ Update тЖТ
Middleware check ржХрж░рзЗ: "ржПржЗ listing ржПрж░ owner ржХрж┐?" тЖТ
  тФФтФА ржирж╛ рж╣рж▓рзЗ: error ржжрзЗржЦрж╛ржпрж╝
  тФФтФА рж╣рж▓рзЗ: MongoDB Update ржХрж░рзЗ
  
Code рж▓рж╛ржЗржи: middleware.js (isOwner) тЖТ route/listing.js тЖТ controllers/listings.js line 15
```

### 4я╕ПтГг Review ржпрзЛржЧ ржХрж░рж╛
```
User /listings/:id ржП review form ржнрж░рзЗ Submit тЖТ
Middleware check ржХрж░рзЗ: "рж▓ржЧржЗржи ржЖржЫрзЗ?" тЖТ
route/review.js (POST /) тЖТ
controllers/reviews.js тЖТ
  тФЬтФА Review ржЕржмржЬрзЗржХрзНржЯ рждрзИрж░рж┐ ржХрж░рж╛
  тФЬтФА Author = current user
  тФЬтФА MongoDB ржП save ржХрж░рж╛
  тФЬтФА Listing ржП review id ржпрзЛржЧ ржХрж░рж╛
  тФФтФА /listings/:id ржП redirect

Code рж▓рж╛ржЗржи: route/review.js тЖТ controllers/reviews.js
```

### 5я╕ПтГг Review ржбрж┐рж▓рж┐ржЯ ржХрж░рж╛
```
Review author ржПрж░ ржЫржмрж┐рждрзЗ Delete button ржжрзЗржЦрж╛ ржпрж╛ржпрж╝ тЖТ
middleware.js (isReviewAuthor) check ржХрж░рзЗ author ржХрж┐? тЖТ
  тФФтФА ржирж╛ рж╣рж▓рзЗ: error
  тФФтФА рж╣рж▓рзЗ: MongoDB ржерзЗржХрзЗ delete ржХрж░рзЗ

Code рж▓рж╛ржЗржи: middleware.js (isReviewAuthor) тЖТ route/review.js (DELETE)
```

---

## ЁЯФР Authorization (ржХрзЗ ржХрж┐ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ)

### User Levels
| ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА | Listing | Review |
|----------|---------|--------|
| **Not Logged In** | ржжрзЗржЦрждрзЗ ржкрж╛рж░ржмрзЗ | ржжрзЗржЦрждрзЗ ржкрж╛рж░ржмрзЗ, ржпрзБржХрзНржд ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛ |
| **Logged In (ржирж┐ржЬрзЗрж░)** | Create/Edit/Delete | Create/Delete |
| **Logged In (ржЕржирзНржпрзЗрж░)** | ржжрзЗржЦрждрзЗ ржкрж╛рж░ржмрзЗ | Create/Delete (ржирж┐ржЬрзЗрж░) |

### Middleware ржпрж╛ ржПржЯрж╛ enforce ржХрж░рзЗ
```javascript
// middleware.js

isLoggedIn()        тЖТ "рж▓ржЧржЗржи ржХрж░рж╛ ржЖржЫрзЗ ржХрж┐?"
isOwner()           тЖТ "Listing ржПрж░ owner ржХрж┐?"
isReviewAuthor()    тЖТ "Review рж▓рзЗржЦрж╛рж░ рж▓рзЛржХ ржХрж┐?"
```

---

## ЁЯМР URL Routes (ржХрзЛржерж╛ржпрж╝ ржХрж┐ ржЖржЫрзЗ)

### Listings Routes
```
GET    /listings              тЖТ рж╕ржм listing ржжрзЗржЦрж╛
GET    /listings/new          тЖТ ржирждрзБржи listing ржлрж░рзНржо
POST   /listings              тЖТ ржирждрзБржи listing рждрзИрж░рж┐
GET    /listings/:id          тЖТ ржПржХржЯрж┐ listing ржжрзЗржЦрж╛ (reviews рж╕рж╣)
GET    /listings/:id/edit     тЖТ edit ржлрж░рзНржо
PUT    /listings/:id          тЖТ listing ржЖржкржбрзЗржЯ ржХрж░рж╛
DELETE /listings/:id          тЖТ listing ржбрж┐рж▓рж┐ржЯ ржХрж░рж╛
```

### Review Routes
```
POST   /listings/:id/reviews  тЖТ review ржпрзБржХрзНржд ржХрж░рж╛
DELETE /listings/:id/reviews/:reviewId тЖТ review ржбрж┐рж▓рж┐ржЯ ржХрж░рж╛
```

### User Routes
```
GET    /signup                тЖТ signup ржкрзЗржЬ
POST   /signup                тЖТ ржПржХржЯрж┐ ржирждрзБржи user рждрзИрж░рж┐ ржХрж░рж╛
GET    /login                 тЖТ login ржкрзЗржЬ
POST   /login                 тЖТ user login ржХрж░рж╛
GET    /logout                тЖТ user logout ржХрж░рж╛
```

---

## ЁЯЫая╕П ржХрж┐ржнрж╛ржмрзЗ ржкрзНрж░ржЬрзЗржХрзНржЯ ржЪрж╛рж▓рж╛ржмрзЗржи?

### Local Development
```bash
# 1. рж╕ржм packages ржЗржирж╕рзНржЯрж▓ ржХрж░рж╛
npm install

# 2. MongoDB ржЪрж╛рж▓рзБ ржХрж░рж╛ (Windows)
# MongoDB Compass ржЦрзБрж▓рзЗ ржЕржержмрж╛:
mongod

# 3. Sample data ржнрж░рж╛ (optional, ржкрзНрж░ржержоржмрж╛рж░)
node init/index.js

# 4. рж╕рж╛рж░рзНржнрж╛рж░ ржЪрж╛рж▓рзБ ржХрж░рж╛
node app.js

# 5. ржмрзНрж░рж╛ржЙржЬрж╛рж░ ржП ржпрж╛ржи
http://localhost:3000
```

### Render ржП Deploy ржХрж░рж╛
```bash
# 1. ржЧрж┐ржЯ push ржХрж░рж╛
git push

# 2. Render ржП Environment set ржХрж░рж╛
ATLAS_DB = <your-mongodb-atlas-url>
SECRET = <random-secret>

# 3. Redeploy ржХрж░рж╛
(Render automatically deploys on git push)
```

---

## ЁЯУК ржбрж╛ржЯрж╛ржмрзЗрж╕ Schema (ржбрж╛ржЯрж╛ structure)

### Listing Collection
```javascript
{
  _id: ObjectId,
  title: String,           // "Beautiful Beach House"
  description: String,     // "..."
  image: {
    url: String,           // "https://..."
    filename: String
  },
  price: Number,           // 1500
  location: String,        // "Malibu"
  country: String,         // "United States"
  owner: ObjectId,         // User ржПрж░ _id
  review: [ObjectId],      // Review _ids ржПрж░ array
  created_at: Date
}
```

### User Collection
```javascript
{
  _id: ObjectId,
  username: String,        // "john_doe"
  email: String,           // "john@email.com"
  password: String (hashed),
  listings: [ObjectId]     // User ржПрж░ listings
}
```

### Review Collection
```javascript
{
  _id: ObjectId,
  comment: String,         // "Great place!"
  rating: Number,          // 5
  author: ObjectId,        // User ржПрж░ _id
  created_at: Date
}
```

---

## ЁЯЪА ржХрзЗржи ржПржЗ Flow ржХрж╛ржЬ ржХрж░рзЗ?

### Controller Pattern (MVC)
```
Request ржЖрж╕рзЗ тЖТ
Route ржмрж▓рзЗ: "ржПржЗ request ржЯрж╛ржЗржк ржПрж░ ржЬржирзНржп ржПржЗ controller ржЪрж╛рж▓рж╛ржУ" тЖТ
Controller ржбрж╛ржЯрж╛ process ржХрж░рзЗ тЖТ
Model (Database) ржерзЗржХрзЗ ржбрж╛ржЯрж╛ ржирзЗржпрж╝/ржжрзЗржпрж╝ тЖТ
View (Template) ржжрж┐ржпрж╝рзЗ HTML рждрзИрж░рж┐ ржХрж░рзЗ тЖТ
Response ржкрж╛ржарж╛ржпрж╝
```

### Middleware Pattern
```
Request тЖТ 
  тФЬтФА check ржХрж░рж╛: рж▓ржЧржЗржи ржЖржЫрзЗ?
  тФЬтФА check ржХрж░рж╛: owner?
  тФЬтФА check ржХрж░рж╛: ржбрж╛ржЯрж╛ valid?
  тФФтФА тЖТ Controller тЖТ Response
```

### Session Management
```
Login рж╣рж▓рзЗ тЖТ
  тФЬтФА Passport serialize ржХрж░рзЗ user
  тФЬтФА Express-session MongoDB рждрзЗ save ржХрж░рзЗ
  тФЬтФА Browser ржХрзЗ cookie ржжрзЗржпрж╝
  тФФтФА ржкрж░ржмрж░рзНрждрзА request ржП cookie ржжрзЗржЦрзЗ user identify ржХрж░рзЗ
```

---

## ЁЯФТ ржирж┐рж░рж╛ржкрждрзНрждрж╛ ржлрж┐ржЪрж╛рж░

тЬЕ **ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб Hashing** - plaintext ржП save рж╣ржпрж╝ ржирж╛
тЬЕ **Session Management** - login рж░рзЗржХрж░рзНржб рж░рж╛ржЦрж╛
тЬЕ **Authorization Check** - owner ржПржмржВ author verify ржХрж░рж╛
тЬЕ **Input Validation** - ржлрж░рзНржо data check ржХрж░рж╛ (Joi)
тЬЕ **CSRF Protection** - form tampering ржерзЗржХрзЗ ржмрж╛ржБржЪрж╛

---

## ЁЯУЭ Environment Variables (.env)

```bash
# ржбрж╛ржЯрж╛ржмрзЗрж╕
ATLAS_DB=mongodb+srv://user:pass@cluster0.xxxxx.mongodb.net/wanderlust

# рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐
SECRET=erty456cvbrtvbnghjk
NODE_ENV=development

# Cloudinary (ржЫржмрж┐ ржЖржкрж▓рзЛржб)
CLOUD_NAME=dsbvtxpfu
CLOUD_API_KEY=267867636812226
CLOUD_API_SECRET=SYWn1H-gsWaXKPQp4Dk--QSGbd4
```

---

## ЁЯОУ ржХрж┐ рж╢рж┐ржЦрж╛ рж╣ржпрж╝рзЗржЫрзЗ ржПржЗ ржкрзНрж░ржЬрзЗржХрзНржЯ ржерзЗржХрзЗ?

тЬЕ Express.js ржжрж┐ржпрж╝рзЗ рж╕ржорзНржкрзВрж░рзНржг ржУржпрж╝рзЗржм ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи рждрзИрж░рж┐
тЬЕ MongoDB ржбрж╛ржЯрж╛ржмрзЗрж╕ design ржХрж░рж╛
тЬЕ User Authentication (Passport.js)
тЬЕ Authorization (ржХрзЗ ржХрж┐ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ)
тЬЕ File Upload (Images)
тЬЕ Validation and Error Handling
тЬЕ MVC Architecture
тЬЕ Cloud deployment (Render + MongoDB Atlas)
тЬЕ Git version control

---

## ЁЯЪА ржнржмрж┐рж╖рзНржпрждрзЗ ржпрзЛржЧ ржХрж░рж╛ ржпрж╛ржпрж╝

- Search/Filter listings
- User profile page
- Booking system
- Payment integration (Stripe)
- Email notifications
- User ratings/reviews
- Advanced search (date, price range)
- Map integration
- Admin dashboard

---

**Written with тЭдя╕П for learning!**
